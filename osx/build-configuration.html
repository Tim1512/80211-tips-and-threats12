<!doctype html><html class=no-js lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel=stylesheet><link href=/assets/css/pack.674bc10b.css rel=stylesheet><meta content="Jekyll v3.7.0" name=generator><link href=/assets/img/favicons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/assets/img/favicons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/assets/img/favicons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/assets/img/favicons/manifest.json rel=manifest><link href=/assets/img/favicons/safari-pinned-tab.svg rel=mask-icon color=#08a8ec><link href=/assets/img/favicons/favicon.ico rel="shortcut icon"><meta content=/assets/img/favicons/browserconfig.xml name=msapplication-config><meta content=#08a8ec name=theme-color><title>Build configuration | AppVeyor</title><meta content="Jekyll v3.7.0" name=generator><meta content="Build configuration" property=og:title><meta content=en property=og:locale><meta content="#1 Continuous Delivery service for Windows" name=description><meta content="#1 Continuous Delivery service for Windows" property=og:description><link href=https://www.appveyor.com/docs/build-configuration/ rel=canonical><meta content=https://www.appveyor.com/docs/build-configuration/ property=og:url><meta content=AppVeyor property=og:site_name><meta content=summary name=twitter:card><meta content=@appveyor name=twitter:site><script type=application/ld+json>{"description":"#1 Continuous Delivery service for Windows","@type":"WebPage","url":"https://www.appveyor.com/docs/build-configuration/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.appveyor.com/assets/img/appveyor-logo-256.png"}},"headline":"Build configuration","@context":"http://schema.org"}</script><link href=https://www.appveyor.com/feed.xml rel=alternate type=application/atom+xml title=AppVeyor><body class=docs><div class="contain-to-grid fixed"><nav class=top-bar data-topbar><ul class=title-area><li class=name><a href=/ class=collapse-only><svg viewBox="0 0 374.97 68.23" xmlns=http://www.w3.org/2000/svg><title>AppVeyor Logo</title><path d="M34.12 0A34.11 34.11 0 1 1 .01 34.11 34.11 34.11 0 0 1 34.12 0zm8.37 40.74a10.76 10.76 0 0 0-1.47-15.18 11 11 0 0 0-15.28 2 10.76 10.76 0 0 0 1.47 15.22 11 11 0 0 0 15.28-2zM24.27 62.88a29.57 29.57 0 0 0 8.77 1.67l14.84-21.44a16.5 16.5 0 0 0-3.14-22.22 16.69 16.69 0 0 0-20.3-.06l-20.63 16a30 30 0 0 0 2 8.34L17.59 32.3a16.12 16.12 0 0 0 19.75 18.08zm80.35-54.56l19.72 42.34h-4.55l-6.61-13.92H94.87l-6.53 13.92h-4.72l20-42.34h1.06zm-.53 8.88l-7.28 15.41h14.53zm26.25 2.15h4v5.76a15.93 15.93 0 0 1 5.49-4.9 14.77 14.77 0 0 1 6.94-1.62 15.5 15.5 0 0 1 11.42 4.8 15.81 15.81 0 0 1 4.75 11.54 16.13 16.13 0 0 1-4.71 11.7 15.87 15.87 0 0 1-18.22 3.25 17.4 17.4 0 0 1-5.67-4.64V62.1h-4V19.35zm16.15 3.13a11.82 11.82 0 0 0-8.8 3.64 12.39 12.39 0 0 0-3.58 9.05 12.81 12.81 0 0 0 1.59 6.39 11.61 11.61 0 0 0 4.56 4.5 12.66 12.66 0 0 0 6.27 1.66 11.85 11.85 0 0 0 6.1-1.68 12.25 12.25 0 0 0 4.55-4.68 12.63 12.63 0 0 0 0-12.61 12.16 12.16 0 0 0-10.72-6.27zm24.04-3.13h4v5.76a15.93 15.93 0 0 1 5.49-4.9 14.77 14.77 0 0 1 6.94-1.62 15.5 15.5 0 0 1 11.42 4.8 15.81 15.81 0 0 1 4.75 11.54 16.13 16.13 0 0 1-4.71 11.7 15.87 15.87 0 0 1-18.22 3.25 17.4 17.4 0 0 1-5.67-4.64V62.1h-4V19.35zm16.15 3.13a11.82 11.82 0 0 0-8.8 3.64 12.39 12.39 0 0 0-3.54 9.04 12.81 12.81 0 0 0 1.59 6.39 11.61 11.61 0 0 0 4.56 4.5 12.66 12.66 0 0 0 6.27 1.66 11.85 11.85 0 0 0 6.1-1.68 12.25 12.25 0 0 0 4.55-4.68 12.63 12.63 0 0 0 0-12.61 12.16 12.16 0 0 0-10.73-6.26zm21.48-14.15h4.61l14.05 32.77 14.29-32.77h4.61l-18.46 42.33h-.94L208.16 8.33m70.38 31.95l3.4 1.79a18.54 18.54 0 0 1-3.87 5.27 15.57 15.57 0 0 1-4.93 3 17.37 17.37 0 0 1-6.21 1q-7.69 0-12-5a16.85 16.85 0 0 1-4.33-11.32 16.64 16.64 0 0 1 3.68-10.59 15 15 0 0 1 12.41-5.87 15.54 15.54 0 0 1 12.83 6.06 16.86 16.86 0 0 1 3.47 10.68h-28.3a12.64 12.64 0 0 0 3.5 8.9 11.22 11.22 0 0 0 8.36 3.48 13.6 13.6 0 0 0 4.68-.83 12.26 12.26 0 0 0 3.86-2.19 18.51 18.51 0 0 0 3.44-4.41zm0-8.43a13.33 13.33 0 0 0-2.36-5.15 11.22 11.22 0 0 0-4.11-3.11 12.62 12.62 0 0 0-5.36-1.18 11.58 11.58 0 0 0-8 3 13.37 13.37 0 0 0-3.69 6.48h23.48zm8.51-12.5h4.19l10.8 24.01 10.49-24.01h4.3L298.14 62.1h-4.3l6.14-14.01-12.93-28.74m49.83-.79a15.54 15.54 0 0 1 12 5.23 16.71 16.71 0 0 1-.24 22.77 16.63 16.63 0 0 1-23.57 0 16.67 16.67 0 0 1-.25-22.69 15.54 15.54 0 0 1 12-5.26zm0 4a11.62 11.62 0 0 0-8.63 3.69 12.35 12.35 0 0 0-3.61 9 12.75 12.75 0 0 0 1.64 6.31 11.69 11.69 0 0 0 4.45 4.51 12.64 12.64 0 0 0 12.28 0 11.69 11.69 0 0 0 4.45-4.51 12.75 12.75 0 0 0 1.64-6.31 12.33 12.33 0 0 0-3.63-9 11.61 11.61 0 0 0-8.61-3.69zm22.23-3.21h4.13v4.58a14.18 14.18 0 0 1 3.89-4 7.81 7.81 0 0 1 4.26-1.32 7.38 7.38 0 0 1 3.58 1.06l-2.1 3.38a5.63 5.63 0 0 0-2.13-.55 5.84 5.84 0 0 0-3.89 1.65 10.52 10.52 0 0 0-2.86 5.14q-.75 2.67-.75 10.81v10.56h-4.13V19.35z" fill=#fff fill-rule=evenodd /></svg></a><li class="menu-icon toggle-topbar"><a href=#><span class=show-for-sr>Menu</span> <span aria-hidden=true></span></a></ul><div class=top-bar-section><ul class=left><li><a href=/pricing/ >Pricing</a><li><a href=/docs/ >Docs</a><li><a href=/support/ >Support</a><li><a href=/blog/ >Blog</a><li><a href=/about/ >About</a></ul><ul class=right><li><a href=https://ci.appveyor.com rel=noopener target=_blank>Sign in</a></ul></div></nav></div><div class=row><div class="columns sidebar medium-3"><div class=sidebar-content><ul><li><h4>Guides</h4><ul><li><a href=/docs/ >Welcome to AppVeyor</a><li><a href=/docs/getting-started-with-appveyor-for-linux>Getting started for Linux</a></ul><li><h4>Reference</h4><ul><li><a href=/docs/build-environment/ >Build environment</a><li><a href=/docs/build-configuration/ >Build configuration</a><li><a href=/docs/branches/ >Branches and tags</a><li><a href=/docs/build-phase/ >Build phase</a><li><a href=/docs/running-tests/ >Running tests</a><li><a href=/docs/parallel-testing/ >Parallel testing</a><li><a href=/docs/packaging-artifacts/ >Packaging artifacts</a><li><a href=/docs/nuget/ >NuGet</a><li><a href=/docs/notifications/ >Notifications</a><li><a href=/docs/environment-variables/ >Environment variables</a><li><a href=/docs/build-cache/ >Build cache</a><li><a href=/docs/services-databases/ >Services and databases</a><li><a href=/docs/status-badges/ >Status badges</a><li><a href=/docs/team-setup/ >Set up your team</a><li><a href=/docs/appveyor-yml/ >Appveyor.yml reference</a><li><a href=/docs/api/ >AppVeyor REST API</a><li><a href=/docs/build-worker-api/ >Build Worker API</a></ul><li><h4>Deployment</h4><ul><li><a href=/docs/deployment/ >Overview</a><li><a href=/docs/deployment/web-deploy/ >Web Deploy</a><li><a href=/docs/deployment/ftp/ >FTP, SFTP</a><li><a href=/docs/deployment/sql-database-ssdt/ >SQL Databases (SSDT)</a><li><a href=/docs/deployment/azure-webjob/ >Azure WebJob</a><li><a href=/docs/deployment/azure-app-service-zip-push-deploy/ >Azure App Service Zip</a><li><a href=/docs/deployment/azure-blob/ >Azure Blob</a><li><a href=/docs/deployment/azure-cloud-service/ >Azure Cloud Service</a><li><a href=/docs/deployment/amazon-s3/ >Amazon S3</a><li><a href=/docs/deployment/nuget/ >NuGet</a><li><a href=/docs/deployment/agent/ >Deployment Agent</a><li><a href=/docs/deployment/github/ >GitHub Releases</a><li><a href=/docs/deployment/bintray/ >Bintray</a><li><a href=/docs/deployment/webhook/ >Webhook</a><li><a href=/docs/deployment/environment/ >Environment</a><li><a href=/docs/deployment/local/ >Local deployment</a></ul><li><h4>Stacks</h4><ul><li><a href=/docs/lang/nodejs-iojs/ >Node.js and io.js</a><li><a href=/docs/lang/xamarin/ >Xamarin</a><li><a href=/docs/lang/ruby/ >Ruby</a><li><a href=/docs/lang/cpp/ >C++</a></ul><li><h4>Enterprise</h4><ul><li><a href=/docs/enterprise/ >Getting started</a><li><a href=/docs/enterprise/planning/ >Planning</a><li><a href=/docs/enterprise/installation/ >Installation</a><li><a href=/docs/enterprise/configuration/ >Configuration</a><li><a href=/docs/enterprise/maintenance/ >Maintenance</a><li><a href=/docs/enterprise/how-to/ >How-Tos</a><li><a href=/enterprise/releases/ >Releases</a></ul><li><h4>Misc</h4><ul><li><a href=/docs/how-to/selenium-testing/ >Selenium testing</a><li><a href=/docs/how-to/filtering-commits/ >Filtering commits</a><li><a href=/docs/how-to/download-file/ >Download file</a><li><a href=/docs/how-to/repository-shallow-clone/ >Repository shallow clone</a><li><a href=/docs/how-to/private-git-sub-modules/ >Private Git sub-modules</a><li><a href=/docs/how-to/git-push/ >Git push from build</a><li><a href=/docs/how-to/rdp-to-build-worker/ >RDP to build worker</a><li><a href=/docs/how-to/http-proxy/ >Enabling HTTP proxy</a><li><a href=/docs/how-to/secure-files/ >Secure files</a></ul></ul></div></div><div class="columns medium-9"><div class=docs-content><h1 class=no_toc id=build-configuration>Build configuration</h1><ul id=markdown-toc><li><a href=#build-pipeline id=markdown-toc-build-pipeline>Build pipeline</a><ul><li><a href=#time-limitations id=markdown-toc-time-limitations>Time limitations</a></ul><li><a href=#configuring-build id=markdown-toc-configuring-build>Configuring build</a><ul><li><a href=#appveyoryml-and-ui-coexistence id=markdown-toc-appveyoryml-and-ui-coexistence>appveyor.yml and UI coexistence</a><li><a href=#yaml-file-alternative-naming id=markdown-toc-yaml-file-alternative-naming>YAML file alternative naming</a><li><a href=#alternative-yaml-file-location id=markdown-toc-alternative-yaml-file-location>Alternative YAML file location</a><li><a href=#classic-git-repositories-and-yaml id=markdown-toc-classic-git-repositories-and-yaml>Classic Git repositories and YAML</a><li><a href=#yaml-format-notes id=markdown-toc-yaml-format-notes>YAML format notes</a></ul><li><a href=#build-versioning id=markdown-toc-build-versioning>Build versioning</a><li><a href=#assemblyinfo-patching id=markdown-toc-assemblyinfo-patching>AssemblyInfo patching</a><li><a href=#net-core-csproj-files-patching id=markdown-toc-net-core-csproj-files-patching>.NET Core <code class=highlighter-rouge>.csproj</code> files patching</a><li><a href=#clone-directory id=markdown-toc-clone-directory>Clone directory</a><li><a href=#environment-variables id=markdown-toc-environment-variables>Environment variables</a><ul><li><a href=#custom-environment-variables id=markdown-toc-custom-environment-variables>Custom environment variables</a><li><a href=#interpreters-and-scripts id=markdown-toc-interpreters-and-scripts>Interpreters and Scripts</a><li><a href=#setting-environment-variables-in-build-script id=markdown-toc-setting-environment-variables-in-build-script>Setting environment variables in build script</a><li><a href=#secure-variables id=markdown-toc-secure-variables>Secure variables</a></ul><li><a href=#script-blocks-in-build-configuration id=markdown-toc-script-blocks-in-build-configuration>Script blocks in build configuration</a><li><a href=#installing-additional-software id=markdown-toc-installing-additional-software>Installing additional software</a><ul><li><a href=#chocolatey id=markdown-toc-chocolatey>Chocolatey</a><li><a href=#powershell id=markdown-toc-powershell>PowerShell</a><li><a href=#webpi-command-line id=markdown-toc-webpi-command-line>WebPI Command Line</a></ul><li><a href=#hosts-entries id=markdown-toc-hosts-entries>Hosts entries</a><li><a href=#build-matrix id=markdown-toc-build-matrix>Build matrix</a><ul><li><a href=#failing-strategy id=markdown-toc-failing-strategy>Failing strategy</a><li><a href=#allow-failing-jobs id=markdown-toc-allow-failing-jobs>Allow failing jobs</a><li><a href=#exclude-configuration-from-the-matrix id=markdown-toc-exclude-configuration-from-the-matrix>Exclude configuration from the matrix</a></ul><li><a href=#rolling-builds id=markdown-toc-rolling-builds>Rolling builds</a><li><a href=#scheduled-builds id=markdown-toc-scheduled-builds>Scheduled builds</a><li><a href=#build-queue id=markdown-toc-build-queue>Build queue</a><ul><li><a href=#builds-prioritization id=markdown-toc-builds-prioritization>Builds prioritization</a></ul></ul><h2 id=build-pipeline>Build pipeline</h2><p>Every build goes through the following steps:<ol><li>Run <code class=highlighter-rouge>init</code> scripts<li><strong>Clone</strong> repository into clone folder<ul><li>Checkout build commit<li><code class=highlighter-rouge>cd</code> to clone folder</ul><li>Restore build cache<li>Run <code class=highlighter-rouge>install</code> scripts<li>Patch <code class=highlighter-rouge>AssemblyInfo</code> and <code class=highlighter-rouge>.csproj</code> files<li>Modify <code class=highlighter-rouge>hosts</code> files<li>Start services<li><strong>Build</strong><ul><li>Run <code class=highlighter-rouge>before_build</code> scripts<li>Run msbuild<li>Run <code class=highlighter-rouge>after_build</code> scripts</ul><li><strong>Test</strong><ul><li>Run <code class=highlighter-rouge>before_test</code> scripts<li>Discover and run tests<li>Run <code class=highlighter-rouge>after_test</code> scripts</ul><li>Call <code class=highlighter-rouge>build_success</code> webhooks<li><strong>Package</strong> artifacts<li><strong>Deployment</strong><ul><li>Run <code class=highlighter-rouge>before_deploy</code> scripts<li>Run all configured deployments<li>Run <code class=highlighter-rouge>after_deploy</code> scripts</ul><li><strong>Finalize</strong> successful builds:<ul><li>Call <code class=highlighter-rouge>deployment_success</code> webhooks<li>Run <code class=highlighter-rouge>on_success</code> scripts<li>Save build cache</ul><li><strong>Finalize</strong> failed builds:<ul><li>Call <code class=highlighter-rouge>build_failure</code> webhooks<li>Optionally save build cache<li>Call <code class=highlighter-rouge>deployment_failure</code> webhooks<li>Run <code class=highlighter-rouge>on_failure</code> scripts</ul><li><strong>Finalize</strong> both successful and failed builds:<ul><li>Call <code class=highlighter-rouge>on_finish</code> scripts</ul></ol><p>Note that you can forcibly terminate build with <strong>success</strong> from script with <code class=highlighter-rouge>appveyor exit</code> <code class=highlighter-rouge>cmd</code> command or <code class=highlighter-rouge>Exit-AppVeyorBuild</code> <code class=highlighter-rouge>PS</code> command. This can be done from any script <em>except</em> <strong>Finalize</strong> ones (<code class=highlighter-rouge>on_success</code>, <code class=highlighter-rouge>on_failure</code> and <code class=highlighter-rouge>on_finish</code>).<p>If you need to can forcibly terminate build with <strong>failure</strong> you can run any command with non-zero exit code, for example <code class=highlighter-rouge>exit 1</code> <code class=highlighter-rouge>cmd</code> command or <code class=highlighter-rouge>throw</code> <code class=highlighter-rouge>PS</code> command.<h3 id=time-limitations>Time limitations</h3><p>All plans have 60 minutes quota per build job.<h2 id=configuring-build>Configuring build</h2><p>Project builds can be configured by either <code class=highlighter-rouge>appveyor.yml</code> or on the user interface.<p><code class=highlighter-rouge>appveyor.yml</code> is a project configuration file in YAML format that should be placed in the root of your repository. At a minimum <code class=highlighter-rouge>appveyor.yml</code> is just an empty file.<p>Each method has pros and cons. Via the User interface one can control every aspect of the build process without ever touching the repository. On the other hand, YAML may seem more sophisticated and familiar for those coming from a Linux platform. Another thing to consider is that when you fork/clone a project with its configuration stored in <code class=highlighter-rouge>appveyor.yml</code>, you simply add a new project in AppVeyor referencing repo and you are good to go.<h3 id=appveyoryml-and-ui-coexistence>appveyor.yml and UI coexistence</h3><p>It’s worth noticing that both <code class=highlighter-rouge>appveyor.yml</code> and UI configuration are mutually exclusive. It’s always either YAML or UI - the settings from each are not merged. If you have <code class=highlighter-rouge>appveyor.yml</code> in your repo it will override all settings made on the UI unless explicitly disabled by <strong>Ignore appveyor.yml</strong>. There are few exceptions, which are:<ul><li>Environment variables. Variables defined on UI are getting merged with those ones defined in <code class=highlighter-rouge>appveyor.yml</code>. Variable values with the same names are getting overridden with values from UI.<li>Notification settings defined on UI are getting merged with those ones defined in <code class=highlighter-rouge>appveyor.yml</code>.<li>Build version format is taken from UI if it is not set in <code class=highlighter-rouge>appveyor.yml</code>.</ul><h3 id=yaml-file-alternative-naming>YAML file alternative naming</h3><p>AppVeyor supports dot-file-style YAML named <code class=highlighter-rouge>.appveyor.yml</code> as is. Another custom name like <code class=highlighter-rouge>experimental.yml</code> is also possible, and can be specified in <strong>Custom configuration .yml file name</strong> setting.<h3 id=alternative-yaml-file-location>Alternative YAML file location</h3><p>It is possible to keep YAML file outside of repository. For that place YAML file <strong>as a plain text</strong> (Content-Type: text/plain) and <strong>anonymously accessible</strong> at some HTTP (or HTTPS) location. If using some web hosting, let file has <code class=highlighter-rouge>.txt</code> extension for it to get correct content type. However better option is to use <a href=https://gist.github.com/dragon788/dadcc5d1d1258b5d0d56>permalink to GitHub gist raw file</a>, and take advantage of keeping file change history on GitHub. After that place URL to YAML file to <strong>Custom configuration .yml file name</strong> setting. Needless to say that <a href=#secure-variables>secure variables</a> should be used for secrets in YAML file.<h3 id=classic-git-repositories-and-yaml>Classic Git repositories and YAML</h3><p>Classic Git (unlike GitHub or BitBucket) does not allow individual file check in, therefore YAML file in classic Git repository is being ignored. Workaround is to use <a href=#alternative-yaml-file-location>Alternative YAML file location</a> described above.<h3 id=yaml-format-notes>YAML format notes</h3><p>While working with YAML there are few important points to be aware of:<ul><li>YAML format is sensitive to indentations that must be <strong>spaces</strong>. Do not use tabs to indent configuration sections.<li>Section names in YAML are case-sensitive, so “deploy” and “Deploy” are different things in YAML.</ul><h2 id=build-versioning>Build versioning</h2><p>Every time you push changes into repo or click the <strong>New build</strong> button AppVeyor starts a new build with an incremented build number.<p>You may use the <strong>build number</strong> for versioning purposes (assemblies version patching, naming artifacts, etc.) or just use it for reference.<p>AppVeyor uses the <strong>version</strong> value for naming builds. You can have “through” builds numbering in which major and minor parts of the version are changing and the build number is never reset or you can reset the build number for every new version. In any case, while the build number could be reset to any previously used value, the <em>version must be unique</em> across all builds.<p>You can specify version format in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>1.0.{build}'</span>
</code></pre></div></div><h2 id=assemblyinfo-patching>AssemblyInfo patching</h2><p>AppVeyor has a built-in task for setting values in <code class=highlighter-rouge>AssemblyInfo</code> files during the build. This “patching” process is disabled by default for newly added projects.<p>You can enable patching on the <strong>General</strong> tab of project settings or in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>assembly_info</span><span class=pi>:</span>
  <span class=na>patch</span><span class=pi>:</span> <span class=no>true</span>
  <span class=na>file</span><span class=pi>:</span> <span class=s>MyVersion.cs</span>
  <span class=na>assembly_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>assembly_file_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>assembly_informational_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}-rc1'</span>
</code></pre></div></div><p><strong>Note</strong> that specific attribute like <code class=highlighter-rouge>AssemblyInformationalVersion</code> should exist in <code class=highlighter-rouge>AssemblyInfo</code> file to be patched.<p>You can use environment variables substitution in file name and version formats, for example:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>assembly_version</span><span class=pi>:</span> <span class=s>$(appveyor_build_version)</span>
</code></pre></div></div><h2 id=net-core-csproj-files-patching>.NET Core <code class=highlighter-rouge>.csproj</code> files patching</h2><p>Like with <a href=#assemblyinfo-patching>AssemblyInfo patching</a>, AppVeyor can patch .NET Core <code class=highlighter-rouge>.csproj</code> files. This also applies to .NET Standard and ASP.NET Core <code class=highlighter-rouge>.csproj</code> files, which has the same new structure, different from classic .NET <code class=highlighter-rouge>.csproj</code> files. The main practical reason to patch those files is to set version to be used by <strong>nuget packaging</strong> of .NET Core and .NET Standard libraries (created in Visual Studio 2017, and probably later versions).<p>You can enable patching on the <strong>General</strong> tab of project settings or in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>dotnet_csproj</span><span class=pi>:</span>
  <span class=na>patch</span><span class=pi>:</span> <span class=no>true</span>
  <span class=na>file</span><span class=pi>:</span> <span class=s1>'</span><span class=s>**\*.csproj'</span>
  <span class=na>version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>package_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>assembly_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>file_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
  <span class=na>informational_version</span><span class=pi>:</span> <span class=s1>'</span><span class=s>{version}'</span>
</code></pre></div></div><p>This section can also be used to patch <code class=highlighter-rouge>*.props</code>, <code class=highlighter-rouge>.fsproj</code> and <code class=highlighter-rouge>.xml</code> files side-by-side with <code class=highlighter-rouge>.csproj</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>dotnet_csproj</span><span class=pi>:</span>
  <span class=na>patch</span><span class=pi>:</span> <span class=no>true</span>
  <span class=na>file</span><span class=pi>:</span> <span class=s1>'</span><span class=s>**\*.csproj;**\*.props;**\*.fsproj;**\*.xml'</span>
  <span class=s>...</span>
</code></pre></div></div><p><strong>Note</strong> that specific attribute like <code class=highlighter-rouge>PackageVersion</code> should exist in <code class=highlighter-rouge>.csproj</code> file to be patched. <strong>Note</strong> that the xmlns must not be defined or else the file won’t be processed.<p>You can use environment variables substitution in file name and version formats, for example:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>package_version</span><span class=pi>:</span> <span class=s>$(appveyor_build_version)</span>
</code></pre></div></div><h2 id=clone-directory>Clone directory</h2><p>The format of the default directory on the build machine for cloning repository is <code class=highlighter-rouge>c:\projects\&lt;project-slug></code>.<p>If required by your project (say, if absolute paths are used to reference its parts) you can change the clone directory path on the <strong>Environment</strong> tab of project settings or in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>clone_folder</span><span class=pi>:</span> <span class=s>c:\projects\myproject</span>
</code></pre></div></div><h2 id=environment-variables>Environment variables</h2><p>Immediately after cloning the repo on the build worker AppVeyor sets <a href=/docs/environment-variables/ >standard environment variables</a>.<h3 id=custom-environment-variables>Custom environment variables</h3><p>Custom environment variables can be set on the <strong>Environment</strong> tab of project settings or in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>environment</span><span class=pi>:</span>
  <span class=na>variable1</span><span class=pi>:</span> <span class=s>value</span>
  <span class=na>variable2</span><span class=pi>:</span> <span class=s>value</span>
</code></pre></div></div><h3 id=interpreters-and-scripts>Interpreters and Scripts</h3><p>AppVeyor allows you to choose between Command scripting and PowerShell scripting. If you are using the Command interpreter and batch files then prefix your script with <code class=highlighter-rouge>cmd:</code> as shown below. Do not use <code class=highlighter-rouge>command:</code>.<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>test_script</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>cmd</span><span class=pi>:</span> <span class=s>ECHO this is batch</span>
</code></pre></div></div><p>If you are using the PowerShell then prefix your script with <code class=highlighter-rouge>ps:</code> as shown below. Do not use <code class=highlighter-rouge>powershell:</code>.<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>test_script</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=s>Write-Host "This is PowerShell"</span>
</code></pre></div></div><h3 id=setting-environment-variables-in-build-script>Setting environment variables in build script</h3><p>CMD:<pre><code class=language-bat>set MY_VARIABLE=value
</code></pre><p>Once a variable is set for a batch file you access it by <code class=highlighter-rouge>%MY_VARIABLE%</code>.<p>PowerShell:<div class="language-powershell highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nv>$env</span>:MY_VARIABLE<span class=o>=</span><span class=s2>"value"</span>
</code></pre></div></div><p>Once a PowerShell variable is set you access it by <code class=highlighter-rouge>$env:MY_VARIABLE</code>. Do not use PowerShell syntax of <code class=highlighter-rouge>$MY_VARIABLE</code>.<h3 id=secure-variables>Secure variables</h3><p>When you work with OSS projects and you’d like to hide some sensitive data from everyone’s eyes you can use <strong>secure variables</strong> in <code class=highlighter-rouge>appveyor.yml</code>.<p>AppVeyor generates a unique encryption key for every account. To encrypt variable values go to <strong>Account → Encrypt data</strong> tool.<p>To use encrypted variable in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>environment</span><span class=pi>:</span>
  <span class=na>my_variable</span><span class=pi>:</span>
    <span class=na>secure</span><span class=pi>:</span> <span class=s>&lt;encrypt_value></span>
</code></pre></div></div><p>“Secure” variables means you can safely put them into <code class=highlighter-rouge>appveyor.yml</code> that is visible to others. Other than that they are just regular environment variables in a build session that could be easily displayed in a build log by simple <code class=highlighter-rouge>Get-ChildItem env:</code>.<p>However, <strong>secure variables are <em>not</em> decoded during Pull Request</strong> builds which prevents someone from submitting PR with malicious build script displaying those variables. In more controlled environment through with a trusted team and private GitHub repositories there is an option on General tab of project settings to allow secure variables for PRs.<h2 id=script-blocks-in-build-configuration>Script blocks in build configuration</h2><p>There are a lot of places in configuration where you can inject your custom logic like “install” scripts, “before build”, “after tests”, “deploy” scripts, etc.<p>Every script could be authored either as a batch or PowerShell snippet.<p>When you set <strong>Cmd</strong> script on the UI its body will be split into lines and executed as separate commands with an exit code check after each line. For example, consider the following “install” script:<p><img src=/assets/img/docs/install-script-cmd.ca0e4111.png alt="install script cmd"><p>If exit code of the first command (<code class=highlighter-rouge>gem update --system</code>) is different from a 0 script execution will be terminated and entire build will return as failed.<p>When <strong>PS</strong> (<em>PowerShell</em>) or <strong>PS CORE</strong> (<em>PowerShell Core</em>) is selected the entire body is treated as a single (<em>PowerShell</em> or <em>PowerShell Core</em>) script, so you can use control flow logic inside it. For example:<p><img src=/assets/img/docs/build-script-ps.b148019b.png alt="build script ps"><p><img src=/assets/img/docs/build-script-ps-core.b01a2fe0.png alt="build script ps"><p>PowerShell script is considered successful if it finishes without exception.<p>If you need to check execution results of commands in the middle of PowerShell script you can verify <code class=highlighter-rouge>$LastExitCode</code> after calling a command and terminate earlier, for example:<div class="language-powershell highlighter-rouge"><div class=highlight><pre class=highlight><code>vstest.console myassembly1.dll
<span class=k>if</span> <span class=o>(</span><span class=nv>$LastExitCode</span> -ne 0<span class=o>)</span> <span class=o>{</span> <span class=nv>$host</span>.SetShouldExit<span class=o>(</span><span class=nv>$LastExitCode</span><span class=o>)</span>  <span class=o>}</span>

vstest.console myassembly2.dll
<span class=k>if</span> <span class=o>(</span><span class=nv>$LastExitCode</span> -ne 0<span class=o>)</span> <span class=o>{</span> <span class=nv>$host</span>.SetShouldExit<span class=o>(</span><span class=nv>$LastExitCode</span><span class=o>)</span>  <span class=o>}</span>
</code></pre></div></div><p>There are a few ways of configuring scripts in <code class=highlighter-rouge>appveyor.yml</code>.<p>For example, this is the same configuration as shown on the first screenshot:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=s>gem update --system</span>
  <span class=pi>-</span> <span class=s>gem install rake</span>
</code></pre></div></div><p>By default, script line is treated as batch command, but you can specify script engine explicitly:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>before_build</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>cmd</span><span class=pi>:</span> <span class=s>ECHO this is batch</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=s>Write-Host "This is PowerShell"</span>
  <span class=pi>-</span> <span class=na>pwsh</span><span class=pi>:</span> <span class=s>Write-Host "This is PowerShell Core"</span>
</code></pre></div></div><p>To add multi-line PowerShell script covering an entire event:<ul><li>note that indentation for lines after <code class=highlighter-rouge>- ps: |</code> should be at least 4 spaces longer</ul><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>on_success</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=pi>|</span>
      <span class=no>if ($true)</span>
      <span class=no>{</span>
        <span class=no>Write-Host "Success"</span>
      <span class=no>}</span>
</code></pre></div></div><p>This syntax is also valid:<ul><li>this kind of syntax is being auto-generated by <strong>Export YAML</strong> menu<li>spaces between lines created by <strong>Export YAML</strong> menu are mandatory</ul><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>on_success</span><span class=pi>:</span>
<span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=pi>>-</span>
    <span class=no>if ($true)</span>

    <span class=no>{</span>
      <span class=no>Write-Host "Success"</span>
    <span class=no>}</span>
</code></pre></div></div><h2 id=installing-additional-software>Installing additional software</h2><p>Every build runs on a pristine virtual machine that is not shared with any other builds. VM state is not preserved between builds.<p>You can install additional software on the build machine using Chocolatey, Web Platform Installer (Web PI) or PowerShell.<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span> <span class=s>&lt;script></span>
</code></pre></div></div><p>or<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>cmd</span><span class=pi>:</span> <span class=s>rd temp</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=s>Write-Host “Hello!”</span>
</code></pre></div></div><h3 id=chocolatey>Chocolatey</h3><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=s>cinst &lt;package></span>
</code></pre></div></div><h3 id=powershell>PowerShell</h3><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=s>(new-object net.webclient).DownloadFile('https://mysite.com/mypackage.msi', 'mypackage.msi')</span>
  <span class=pi>-</span> <span class=na>ps</span><span class=pi>:</span> <span class=s>msiexec /i mypackage.msi /quiet /qn /norestart /log install.log PROPERTY1=value1 PROPERTY2=value2</span>
</code></pre></div></div><h3 id=webpi-command-line>WebPI Command Line</h3><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>install</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=s>WebpiCmd /Install /Products:&lt;Title or ID></span>
</code></pre></div></div><h2 id=hosts-entries>Hosts entries</h2><div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>hosts</span><span class=pi>:</span>
  <span class=na>localhost</span><span class=pi>:</span> <span class=s>127.0.0.1</span>
  <span class=s>db.server.com</span><span class=pi>:</span> <span class=s>127.0.0.2</span>
</code></pre></div></div><h2 id=build-matrix>Build matrix</h2><p>Every AppVeyor <em>build</em> consists of one or more <em>jobs</em>. A build is considered successful if all jobs are successful. A build immediately fails when any of its jobs fail.<p>AppVeyor enables easy testing against multiple combinations of platforms, configurations and environments. Specify which operating systems, build configurations and platforms you would like to include into the build matrix and AppVeyor will create a build with multiple jobs for all possible combinations.<p>Build matrix supports the following dimensions:<ul><li><strong>Operating system</strong><li><strong>Environment variables</strong><li><strong>Platform</strong>, e.g. x86, x64, Any CPU<li><strong>Configuration</strong>, e.g. Build, Debug<li><strong>Test categories</strong><li><strong>Build cloud</strong></ul><p>For example, selecting <strong>x86, Any CPU</strong> for Platform and <strong>Debug, Release</strong> for Configuration yields the build with the following jobs:<ul><li>x86, Debug<li>x86, Release<li>Any CPU, Debug<li>Any CPU, Release</ul><p>To configure build matrix in <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>environment</span><span class=pi>:</span>
  <span class=c1># these variables are common to all jobs</span>
  <span class=na>common_var1</span><span class=pi>:</span> <span class=s>value1</span>
  <span class=na>common_var2</span><span class=pi>:</span> <span class=s>value2</span>

  <span class=na>matrix</span><span class=pi>:</span>
    <span class=c1># first group</span>
    <span class=pi>-</span> <span class=na>db</span><span class=pi>:</span> <span class=s>mysql</span>
      <span class=na>provider</span><span class=pi>:</span> <span class=s>mysql</span>

    <span class=c1># second group</span>
    <span class=pi>-</span> <span class=na>db</span><span class=pi>:</span> <span class=s>mssql</span>
      <span class=na>provider</span><span class=pi>:</span> <span class=s>mssql</span>
      <span class=na>password</span><span class=pi>:</span>
        <span class=na>secure</span><span class=pi>:</span> <span class=s>DHEU39J6X9VD376==</span>

<span class=na>platform</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=s>x86</span>
  <span class=pi>-</span> <span class=s>Any CPU</span>

<span class=na>configuration</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=s>Debug</span>
  <span class=pi>-</span> <span class=s>Release</span>

<span class=na>matrix</span><span class=pi>:</span>
  <span class=na>fast_finish</span><span class=pi>:</span> <span class=no>true</span>
</code></pre></div></div><h3 id=failing-strategy>Failing strategy</h3><p>By default AppVeyor <strong>runs all</strong> build jobs. If at least one job has failed the entire build is marked as failed. Sometimes, you want the build fail immediately once one of the job fails. To enable <strong>fast fail</strong> strategy add <code class=highlighter-rouge>fast_finish</code> setting into <code class=highlighter-rouge>appveyor.yml</code>:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>matrix</span><span class=pi>:</span>
  <span class=na>fast_finish</span><span class=pi>:</span> <span class=no>true</span>
</code></pre></div></div><h3 id=allow-failing-jobs>Allow failing jobs</h3><p>You can configure AppVeyor to allow certain build matrix rows to fail and still continue with the rest of the build. <em>The result of these failing jobs is not counted towards build status</em>. This may be useful if you are experimenting with running tests on the latest version of a platform or framework, e.g. Node.js 0.11.<p>To allow failing jobs add <code class=highlighter-rouge>matrix.allow_failures</code> section into <code class=highlighter-rouge>appveyor.yml</code> (the feature is not available on UI):<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>matrix</span><span class=pi>:</span>
  <span class=na>allow_failures</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=s>&lt;condition></span><span class=pi>:</span> <span class=s>&lt;value></span>
</code></pre></div></div><p><code class=highlighter-rouge>&lt;condition></code> can be <code class=highlighter-rouge>os</code>, <code class=highlighter-rouge>image</code>, <code class=highlighter-rouge>configuration</code>, <code class=highlighter-rouge>platform</code>, <code class=highlighter-rouge>test_category</code> or the name of environment variable.<p>For example, to allow job failing on Node.js 0.11 (TBD - add link to Node.js instructions):<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>matrix</span><span class=pi>:</span>
  <span class=na>allow_failures</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=na>nodejs_version</span><span class=pi>:</span> <span class=s>0.11</span>
</code></pre></div></div><p>The following example allows failure for <code class=highlighter-rouge>platform=x86, configuration=Debug</code> and <code class=highlighter-rouge>platform=x64, configuration=Release</code> jobs:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>matrix</span><span class=pi>:</span>
  <span class=na>allow_failures</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=na>platform</span><span class=pi>:</span> <span class=s>x86</span>
      <span class=na>configuration</span><span class=pi>:</span> <span class=s>Debug</span>
    <span class=pi>-</span> <span class=na>platform</span><span class=pi>:</span> <span class=s>x64</span>
      <span class=na>configuration</span><span class=pi>:</span> <span class=s>Release</span>
</code></pre></div></div><p>The matrix is already optimized for fast failing. The logic is as follows:<ul><li>If a job that does not allow failure has failed the build fails.<li>If a job that does allow failure has failed and the rest of jobs allow failures the build fails.</ul><p>See <a href=/docs/appveyor-yml/ >complete appveyor.yml reference</a> for full syntax.<h3 id=exclude-configuration-from-the-matrix>Exclude configuration from the matrix</h3><p>It is possible to exclude configuration from the matrix. Syntax is the same as for <code class=highlighter-rouge>allow_failures</code> (this feature is also YAML-only and not available in UI currently).<p>Please consider the following example:<div class="language-yaml highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=na>configuration</span><span class=pi>:</span>
<span class=pi>-</span> <span class=s>Debug</span>
<span class=pi>-</span> <span class=s>Release</span>

<span class=na>environment</span><span class=pi>:</span>
  <span class=na>matrix</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=na>MY_VAR</span><span class=pi>:</span> <span class=s>A</span>
    <span class=pi>-</span> <span class=na>MY_VAR</span><span class=pi>:</span> <span class=s>B</span>

<span class=na>matrix</span><span class=pi>:</span>
  <span class=na>exclude</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=na>configuration</span><span class=pi>:</span> <span class=s>Debug</span>
      <span class=na>MY_VAR</span><span class=pi>:</span> <span class=s>B</span>
</code></pre></div></div><p>Here we have 2 matrix dimensions: configurations and variables and each has 2 values. Therefore by default it should be 2X2=4 build jobs. But if combination of <code class=highlighter-rouge>configuration: Debug</code> and <code class=highlighter-rouge>MY_VAR: B</code> is not needed, we can exclude it. In comparison with <code class=highlighter-rouge>allow_failures</code> build will not be even started for this combination.<p>We still recommend use <code class=highlighter-rouge>allow_failures</code> for “unstable” cases which should be built but should not affect build results, and use <code class=highlighter-rouge>exclude</code> for cases where build should be completely skipped.<h2 id=rolling-builds>Rolling builds</h2><p>“Rolling builds” are great for very active OSS projects with lengthy queue. Whenever you do a new commit to the same branch <em>OR</em> pull request all current queued/running builds for that branch or PR are cancelled and the new one is queued. Other words, rolling builds make sure that only the most recent commit is built.<p>For example, you do commit <code class=highlighter-rouge>A</code> to <code class=highlighter-rouge>master</code> branch - it’s being queued and then run. Then you do <code class=highlighter-rouge>B</code> commit to <code class=highlighter-rouge>master</code> branch while <code class=highlighter-rouge>A</code> is running - build of <code class=highlighter-rouge>A</code> will be cancelled immediately and <code class=highlighter-rouge>B</code> is queued. If you do another <code class=highlighter-rouge>C</code> commit while <code class=highlighter-rouge>B</code> is queued it will be cancelled and <code class=highlighter-rouge>C</code> queued.<h2 id=scheduled-builds>Scheduled builds</h2><p>AppVeyor uses <a href=https://github.com/atifaziz/NCrontab>NCrontab library</a> to calculate a build schedule.<p>Schedule hour values should be UTC.<p>External links:<ul><li><a href=https://github.com/atifaziz/NCrontab/wiki/Crontab-Expression>Crontab expression syntax</a><li><a href=https://github.com/atifaziz/NCrontab/wiki/Crontab-Examples>Crontab examples</a></ul><h2 id=build-queue>Build queue</h2><p>Sometimes you may wonder why your build is not being run immediately or remains in “queued” state longer than usual.<p>This is how builds scheduling works.<p>First, the maximum number of builds running simultaneously is defined by account plan. For Free and Professional it’s 1 concurrent job, for Premium it’s 2. This is per account.<p>If there are no running builds under your account then there might be other reasons why the build is still in Queued state. First, VM assigned to a build is still being provisioned. We maintain some “cache” of pre-heated VMs, and if a build is assigned to pre-provisioned machine it should start almost instantly. If there are no machines in there then VM is creating from scratch. Usually, it should take no longer than 3-4 minutes.<p>However, sometimes (in rare occasions) due to Azure conditions provisioning could take longer, up to 10 minutes, but AppVeyor waits 5 minutes for machine being online and if it’s not the build is rescheduled to another machine. Sometimes, machine is failed to report “online” state to AppVeyor and it’s also getting replaced with a new one. Another reason could be Service Bus queue which is lagging some times.<p>We are constantly working on monitoring, understanding and mitigating those Azure-related issues to make AV architecture more robust and resilient.<p>However, technically there are no limitations on how many VMs can be run at the same time and we are not enforcing the maximum number of concurrent builds across all accounts.<h3 id=builds-prioritization>Builds prioritization</h3><p>When a lot of commits are made by your team during the day there are multiple builds awaiting in “queued” state. It is possible to move up and down certain builds in a queue by changing their projects’ priority. <strong>Build priority</strong> setting is located on General tab of project settings. When priority is not set builds are not prioritized. When priority is set builds in a queue are in ascending order. The higher number - the lower priority; the highest priority is 1. Builds with priority has precedence over those ones without it.<p>As a real-world example, suppose we have three projects: A, B and C. We want builds of project A always come first, then builds of project B and the rest in FIFO order. We set project A build priority to 1 (the highest priority) and project B priority to 2. Then we did commits in the following order (provided our account allows only one concurrent job and first build of project C is still running):<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>C (no priority) - 1 - running
C (no priority) - 2 - queued
B (priority 2)  - 1 - queued
A (priority 1)  - 1 - queued
B (priority 2)  - 2 - queued
</code></pre></div></div><p>Build queue will look as below:<div class=highlighter-rouge><div class=highlight><pre class=highlight><code>C (no priority) - 1 - running
A (priority 1)  - 1 - queued    &lt;-- this build comes next
B (priority 2)  - 1 - queued
B (priority 2)  - 2 - queued
C (no priority) - 2 - queued
</code></pre></div></div></div><div class=edit-page-invitation>Did you know that you can <a href=https://github.com/appveyor/website/tree/master/src/docs/build-configuration.md rel=noopener target=_blank>edit this page on GitHub</a> and send us a Pull Request?</div></div></div><footer class=footer-container><div class="row footer"><div class="columns small-only-text-center medium-10"><ul><li><a href=/about/ >About</a><li><a href=/pricing/ >Pricing</a><li><a href=/docs/ >Documentation</a><li><a href=https://help.appveyor.com/discussions rel=noopener target=_blank>Support</a><li><a href=/blog/ >Blog</a><li><a href=/terms-of-service/ >Terms of service</a><li><a href=/privacy-policy/ >Privacy policy</a><li><a href=/eula/ >EULA</a><li><a href=/feed.xml>RSS Feed</a></ul></div><div class="columns small-only-text-center medium-2 medium-only-text-right"><ul><li><a href=https://appveyor.statuspage.io rel=noopener target=_blank>Status</a><li><a href=https://twitter.com/appveyor rel=noopener target=_blank class=twitter><svg viewBox="0 0 400 400" xmlns=http://www.w3.org/2000/svg class=twitter-logo><defs><style>.cls-1{fill:none}.cls-2{fill:#1da1f2}</style></defs><path d="M0 0h400v400H0z" class=cls-1 /><path d="M153.62 301.59c94.34 0 145.94-78.16 145.94-145.94 0-2.22 0-4.43-.15-6.63A104.36 104.36 0 0 0 325 122.47a102.38 102.38 0 0 1-29.46 8.07 51.47 51.47 0 0 0 22.55-28.37 102.79 102.79 0 0 1-32.57 12.45 51.34 51.34 0 0 0-87.41 46.78A145.62 145.62 0 0 1 92.4 107.81a51.33 51.33 0 0 0 15.88 68.47A50.91 50.91 0 0 1 85 169.86v.65a51.31 51.31 0 0 0 41.15 50.28 51.21 51.21 0 0 1-23.16.88 51.35 51.35 0 0 0 47.92 35.62 102.92 102.92 0 0 1-63.7 22 104.41 104.41 0 0 1-12.21-.74 145.21 145.21 0 0 0 78.62 23" class=cls-2 /></svg> Twitter</a></ul></div></div></footer><script async src=/assets/js/pack.67c58526.js></script><script async src=/assets/js/jquery-pack.688f2c95.js></script>